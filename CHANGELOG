
RCS file: /usr/src/CVS/ApacheStat/ata,v
Working file: ata
head: 1.12
branch:
locks: strict
access list:
symbolic names:
keyword substitution: kv
total revisions: 12;	selected revisions: 12
description:
----------------------------
revision 1.12
date: 2004/09/06 13:01:35;  author: gosha;  state: Exp;  lines: +34 -9
Добавил параметр командной строки -dump <file>
	для дампа нераспознанных строк в файл file

Поправил регулярное выражение по умолчанию для разбора лога
----------------------------
revision 1.11
date: 2004/08/28 20:29:24;  author: gosha;  state: Exp;  lines: +3 -3
Доку поправил
----------------------------
revision 1.10
date: 2004/08/27 09:37:42;  author: gosha;  state: Exp;  lines: +34 -14
Добавил процедуру квотирования данных при выводе отчета
	в html формате.

Ключи теперь генерятся, `склеиваясь` '\x00' вместо ',' -
	'\x00' - в логах хрен встретиш в отличии от ','

Доку несколько поправил...
----------------------------
revision 1.9
date: 2004/08/27 01:18:55;  author: gosha;  state: Exp;  lines: +4 -4
Заголовки в html отчетах поправил...
----------------------------
revision 1.8
date: 2004/08/27 00:45:53;  author: gosha;  state: Exp;  lines: +75 -25
Добавил в тело скрипта переменную $VERSION.

Поменял format по умолчанию - теперь также возможно
	использовать имя расширение файла из лог строки...
	В `-f` соответственно добавил поле req_ext.

Добавил некоторую визуализацию процесса чтения
	данных из лог файла. Новая опция -show
	разрешает при чтении лог файла выводить на экран
	количество прочитанных строк. Не рекомндую пользовать
	данную опцию - так как скорость работы замедляется
	~ на 20 %. Данная опция добавлена скорее для проверки
	работоспособности скрипта в `визуальном` так сказать
	режиме...
----------------------------
revision 1.7
date: 2004/08/26 23:33:58;  author: gosha;  state: Exp;  lines: +36 -33
Переписал pod документацию
----------------------------
revision 1.6
date: 2004/08/26 19:31:10;  author: gosha;  state: Exp;  lines: +28 -22
Добавил проверку соответствия входной информации
	из лог-файла ( -file ) заданному регулярному
	выражению ( -format ), в результате чего пришлось
	сменить сам алгоритм разбора логов...
----------------------------
revision 1.5
date: 2004/08/25 18:54:34;  author: gosha;  state: Exp;  lines: +182 -49
Добавил в отчет, в html, формате вывод процентного соотношения

Добавил в отчеты вывод суммы трафика и числа запросов

Добавил ключ командной строки `-desc`, обратный порядок сортировки
	( по умолчанию теперь восходящий порядок сортировки )

Сделал контроль дупов в `-gb`, повторы сказывались на скорости
	работы скрипта

Параметр -order_by теперь стало возможно использоват несколько
	раз, то есть в сортировке теперь может быть использован любой
	набор полей описанных в `-gb` а также зарезервированные
	'поля':  `count` и `size`. Сортировка теперь вынесена в
	отдельную процедуру...
----------------------------
revision 1.4
date: 2004/08/23 08:26:29;  author: gosha;  state: Exp;  lines: +40 -8
Добавил параметр tr_size_fld  - имя параметра ( из `-f` )
	по которому считается размер трафика, соответственно
	отказался от использования жестко прописанного параметра
	`byte` в теле скрипта для расчета трафика...

Отказался от использования конструкции $regex = qr/$regex/;
	генерируемое регулярное выражение //ismx - несколько тормозное
	из за /i

Переписал код инициализации временного хеша %log -
	увеличение производительности в 2 с лишним раза...
----------------------------
revision 1.3
date: 2004/08/23 01:10:48;  author: gosha;  state: Exp;  lines: +159 -24

Поправил регулярное выражение format
	ошибка при request вида /~gosha/index.html и /~gosha/

Добавил POD документацию
----------------------------
revision 1.2
date: 2004/08/22 23:16:07;  author: gosha;  state: Exp;  lines: +128 -40
Добавил регистро-независимость значений параметров командной строки
	( везде кроме параметров forma и file )

Поменял имена параметров:
	f 			=> file
	group_by	=> gb
	fields		=> f

Добавил параметры командной строки
	unit - единици измерения трафика ( B, K, M, G )
	help - вывод справки
	txt  - отчет в текстовом формате

Вывод отчета по умолчанию в html формате
----------------------------
revision 1.1
date: 2004/08/22 20:42:05;  author: gosha;  state: Exp;
Скрипт для генерации статистики по transferlog файлу...
=============================================================================
